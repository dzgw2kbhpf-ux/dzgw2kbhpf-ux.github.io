<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JDM Custom Garage</title>
<style>
body { margin:0; overflow:hidden; background:#333; }
#ui {
 position:fixed;
 bottom:10px;
 left:50%;
 transform:translateX(-50%);
 background:rgba(0,0,0,0.8);
 color:white;
 padding:10px;
 border-radius:12px;
 font-size:14px;
}
#ui select, #ui input { width:100%; margin-top:4px; }
</style>
</head>
<body>

<div id="ui">
 車種
 <select id="carSelect">
  <option value="ae86">AE86</option>
  <option value="r34">R34</option>
  <option value="rx7">RX-7</option>
 </select>

 車高
 <input type="range" id="height" min="0.1" max="0.6" step="0.01" value="0.3">

 ホイールサイズ
 <input type="range" id="wheelSize" min="0.25" max="0.45" step="0.01" value="0.3">

 ホイール色
 <input type="color" id="wheelColor" value="#111111">
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158/build/three.min.js"></script>

<script>
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x555555);

const camera = new THREE.PerspectiveCamera(70, innerWidth/innerHeight, 0.1, 100);
camera.position.set(0,1.2,4);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

/* ライト */
scene.add(new THREE.AmbientLight(0xffffff,1.2));
const d = new THREE.DirectionalLight(0xffffff,1.5);
d.position.set(5,5,5);
scene.add(d);

/* 車グループ */
let carGroup = new THREE.Group();
scene.add(carGroup);

let wheels = [];

function createCar(type){
 carGroup.clear();
 wheels=[];

 let body;
 if(type==="ae86"){
  body = new THREE.BoxGeometry(1.6,0.5,3);
 }else if(type==="r34"){
  body = new THREE.BoxGeometry(1.8,0.6,3.4);
 }else{
  body = new THREE.BoxGeometry(1.7,0.55,3.2);
 }

 const bodyMesh = new THREE.Mesh(
  body,
  new THREE.MeshStandardMaterial({color:0xff0000})
 );
 bodyMesh.position.y=0.3;
 carGroup.add(bodyMesh);

 const wheelGeo = new THREE.CylinderGeometry(0.3,0.3,0.3,24);
 const wheelMat = new THREE.MeshStandardMaterial({color:0x111111});

 const positions=[
  [-0.8,0, 1.2],[0.8,0, 1.2],
  [-0.8,0,-1.2],[0.8,0,-1.2]
 ];

 positions.forEach(p=>{
  const w = new THREE.Mesh(wheelGeo,wheelMat);
  w.rotation.z=Math.PI/2;
  w.position.set(p[0],0.15,p[2]);
  wheels.push(w);
  carGroup.add(w);
 });
}

createCar("ae86");

/* UI操作 */
carSelect.onchange = e => createCar(e.target.value);

height.oninput = e => {
 carGroup.children.forEach(o=>{
  if(o.geometry.type.includes("Box")) o.position.y = e.target.value;
 });
};

wheelSize.oninput = e => {
 wheels.forEach(w=>{
  w.scale.set(e.target.value,e.target.value,1);
 });
};

wheelColor.oninput = e => {
 wheels.forEach(w=>w.material.color.set(e.target.value));
};

/* タッチ回転 */
let startX=0;
document.addEventListener("touchstart",e=>startX=e.touches[0].clientX);
document.addEventListener("touchmove",e=>{
 let dx = e.touches[0].clientX - startX;
 carGroup.rotation.y += dx*0.005;
 startX = e.touches[0].clientX;
});

/* アニメ */
function animate(){
 requestAnimationFrame(animate);
 renderer.render(scene,camera);
}
animate();

window.onresize=()=>{
 camera.aspect=innerWidth/innerHeight;
 camera.updateProjectionMatrix();
 renderer.setSize(innerWidth,innerHeight);
};
</script>
</body>
</html>
